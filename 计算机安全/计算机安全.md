# 计算机安全

> 计算机安全的定义(CIA，三个目标):保证信息系统资产的机密性(Confidentiality)、完整性(Integrity)和可用性(Availability)的措施和控制方法。

[TOC]

## 一、概述

  ### 1.1 计算机安全的概念

####  CIA三元组 

机密性： **1.数据机密性**

​			   **2.隐私性**

​		e.g.(学生个人信息)

​				(空间访问权限)

​				(仅聊天、不让他看朋友圈)

完整性： **1.数据完整性**

​			   **2.系统完整性**

​		e.g.(学生个人信息的维护)

​				(口令文件)

​				(被植入恶意代码，就破坏了完整性)

完整性缺失是指非授权的信息修改或破坏

可用性： **确保及时可靠地访问和使用信息**

可用性缺失是指对信息或信息系统的访问和使用的破坏

#### 两个常被提到概念：

真实性：**所发送的信息或是其源头可以被验证其真实性（即可完全信任）**

可说明性：**防范抵赖**

#### 拒绝服务DOS( Denyied Of Service)

![74062894980](C:\Users\19535\AppData\Local\Temp\1740628949808.png)

攻击者发送SYN，目标主机回应后攻击者不发送SCK确认帧，目标主机死等回应

#### 分布式拒绝服务攻击(DDOS)

![74062904105](C:\Users\19535\AppData\Local\Temp\1740629041059.png)

### 1.2 威胁、攻击和资产

#### 造成威胁的原因

- ###### 造成威胁的内因

  - 系统在设计、实现和管理中存在很多缺陷。
  - 如:大型软件漏洞、ipv4协议没有考虑安全性、缺省安装、弱口令。
  - 它们提供了大量机会给”黑客”。攻击者利用这些脆弱点来进行破坏活动


- ###### 造成威胁的外因

  - 肆意泛滥的计算机病毒、无网不入的“黑客”正使网络变得更加脆弱，是网络安全最大也是最严重的威胁。
  - 全世界现有20多万个“黑客”网站，每当一种新的“黑客”袭击手段产生，一周内便可传遍全世界。
  - 今天的黑客并不需要高超的技巧

#### 威胁的分类

**非授权泄露、欺骗、破坏、篡夺**

1. **非授权泄露：**实体未授权而获得数据访问-破坏***机密性***

   **攻击方式：**

   - **暴露：**直接泄露(故意泄露)
   - **截获：**搭线窃听
   - **推理：**非授权用户推理(通信量)
   - **入侵：**躲避系统安全保护(绕过防火墙，克服系统访问控制保护)

   ​

2. **欺骗：**导致授权实体接收虚假数据并相信其正确性的情况或事件。-破坏***完整性***

   **攻击方式：**

   - **冒充：**佯装成授权实体(特洛伊木马)

   - **伪造：**伪造虚假数据

   - **抵赖：**否认对行为的责任(否认发送或接收过数据)

     ​

3. **破坏：**中断或阻止系统服务和功能正常运行的情况或事件。-破坏***完整性*** 或***可用性***

   **攻击方式：**

   - **失能：**禁用系统组件(物理破坏、系统硬件损害，恶意软件特洛伊木马、病毒、蠕虫)
   - **损坏：**修改数据或系统功能(设置后门逻辑)
   - **阻碍：**阻止系统运行(中断通信链路)

   ​

4. **篡夺：**

   **攻击方式：**导致系统服务或功能被非授权实体控制的事件或情况。-破坏***完整性***

   - **盗用：**服务窃取(分布式拒绝服务攻击，盗用处理器)

   - **误用：**恶意代码


#### 威胁举例:硬件、软件、数据、通信线路和网络

- 硬件威胁
- 增加设备、改变设备、删除设备、截取通信、用大量信息阻塞设备，使其丧失处理能力
- 攻击硬件的方式：
  - “无意的机器屠杀”:水淹、火烧、冰冻计算机、老鼠咬断电缆、灰尘颗粒威胁精密的移动设备、撞击计算机…
  - “有意的机器破坏”或“机器自毁”:小偷偷走设备、用枪射击机器、炸弹破坏机房.…
  - **目的**：限制可用性



- 软件威胁
- 软件删除
- 软件窜改
  - **特洛伊木马：**一种实际上或表面上有某种有用功能的程序，内部却含有隐蔽代码，当其被调用时会产生一些意想不到的后果。
  - **病毒：**寄生在其他可执行程序中的程序，具有自我传播的破坏性代码，一般病毒代码短小。如CH病毒。
  - **陷门：**又名后门，程序中的秘密入口点，知道陷门的人可以通过这样的入口点绕过正常的安全检查机制。
  - **信息泄露：**使非授权用户和程序对信息具有访问权的代码。软件盗版
- 软件盗版



- 数据威胁
- 数据比硬件和软件有更大的公众价值，故数据攻击比硬件攻击和软件攻击更为严重和广泛!
- 数据安全的特点
  - 数据的价值存在于上下文中
  - 具有一定的**时效性**：短期内很重要，其后价值急速下降
- 将安全目标应用于数据
  - **数据机密性**威胁
    - 分接线路、在输出设备中安置漏洞、从垃圾箱中详细筛选、监听电磁波贿赂关键员工………
  - **数据完整性**威胁
    - 窜改数据、伪装新数据、重放(replay)以前的数据
  - **数据可用性**威胁
    - 偶尔或恶意破坏数据文件

### 1.3 安全功能要求

书本p10-11ovo

### 1.4 基本安全设计原则

- **经济机制原则**

  把安全机制设计得尽可能短小，易于测试和验证

- **安全缺省原则**

  缺省时不能访问（即不能做安全准则中没定义的事情）

- **绝对中介原则**

  每一次访问都应该接收机制的检查

- **开放式设计原则**

  安全机制的设计应当开放而非保密

- **特权分离原则**

  门上有很多锁，钥匙交给不同的人，如多因素用户认证

- **最小特权原则**

  进程和系统用户应当使用完成某项任务所必需的最少特权进行操作

- **最小共用机制原则**

  应最小化不同用户间共享的功能，以提高彼此的安全性

- **心理可接受性原则**

  安全机制不应该过度干涉用户的工作

- **隔离原则**

  1. 公共访问系统应与重要的资源分离，以免被暴露或泄露
  2. 个人进程和文件应与他人的相隔离
  3. 安全机制本身要被隔离

- **封装原则**

  尽量隐藏实现的具体方法



### 1.5 攻击面和攻击树

#### 攻击面

- 攻击面是由系统中可到达的和可被利用的脆弱点构成的
- 攻击面分类
  - 网络攻击面
  - 软件攻击面
  - 人为攻击面

#### 攻击树

- 攻击树是一个分支型的、层次化的数据结构
- 五类可以识别的攻击：
  - 获取用户凭证
  - 命令注入
  - 猜测用户凭证
  - 违反安全策略
  - 利用已知的认证会话


### 1.6 计算机安全策略

- **对策：**对付攻击所采取的任何手段
  - 能够成功**防止**特定类型的攻击
  - 防止不可能时，**检测**攻击，并从攻击造成的后果中**恢复**
- **风险：**执行对策后，可能存在残余的脆弱性，被威胁代理利用、
  - 资产所有者通过制定其他约束来实现最小化风险
- **计算机安全技术措施：**
  - 访问控制:设置权限
  - 识别与认证:认证协议
  - 系统和通信保护:加密
  - 系统和信息完整性:密码工具
- **管理措施：**
  - 意识和培训
  - 审计和可说明性
  - 认证、认可和安全评估
  - 应急规划
  - 维护

## 二、密码编码工具

### 2.1 用对称加密实现机密性

#### 对称加密

- **明文**：原始消息和数据
- **加密算法**：对明文进行代换和变换
- **秘密密钥**：加密算法的输入，对明文进行特定的代换和变换依赖于密钥
- **密文**：算法的输出
- **解密算法**：加密算法的逆运算

##### 对称加密的安全使用需求

- 加密算法必须足够强，即使拥有一定数量的密文和产生密文的明文，也不能破译密文或发现密钥
- 发送/接收方必须在某种安全形式下获得秘密密钥的副本并且保证密钥的安全。若有人发现该密钥且知道相应算法，就能破译

##### 攻击对称加密方案

- **密码分析**：利用算法特征推导出特定的明文或使用的密钥
- **蛮力攻击**：即穷举攻击，对一条密文尝试所有可能的密钥



#### 对称分组加密算法

>分组密码：将定长的明文转换成与明文等长的密文，该算法将明文划分为一系列定长的块（分块不能过小，否则会影响到加密的随机性）

##### 三种流行对称加密算法

- DES（数据加密标准）：明文分组长度（位）->64，密文分组长度（位）->64，密钥长度（位）->56
- 3DES（3重DES）：64，64，112或168（延长DES使用寿命，无有效攻击方式但加密效率慢，且难于用软件实现该算法）
- AES（高级加密标准）：128，128，128或192或256（安全强度不低于3DES，且能显著提高计算效率）

##### 电子密码本模式（ECB）

是最简单的多分组加密模式

明文每次被提交b位且每组明文用相同的密钥进行加密，通常b=64或128



#### 流密码

分组密码一次处理输入的一组密码，每个输入分组产生一个输出分组；流密码则持续地处理输入元素，每次产生一个元素的输出



### 2.2消息认证和散列函数

>加密需要防止被动（窃听）和主动（数据伪造和篡改）攻击，消息认证是为了保证**完整性**

#### 利用对称加密实现认证

- 发送方和接收方共享一个密钥，那么只有发送方才能成功加密，提供接收者能识别的有效信息
- 消息里带有纠错码和序号，接收方就可以确认信息是否被修改过以及顺序是否正确

#### 消息认证码（MAC）

> 认证算法不需要是可逆的

利用**密钥**产生一个固定长度的短数据块

AB使用**共同密钥**，A计算出认证码，和消息一起发送给B，B接收到后再次计算认证码，如和A发送的认证码相同，则：

- 接收方可以相信密码未被修改
- 接收方可以相信消息来自真正的发送方
- 若消息中含有序号，则接收方可以相信消息序列未被改变

#### 单向散列函数

是MAC的一种变形，但不接收密钥作为输入，利用散列值对消息进行认证

#### 安全散列函数

对散列函数H的要求：

- H可应用于任意大小的数据块
- H产生固定长度的输出
- 对任意给定的x，计算H(x)比较容易，用硬件和软件均可实现
- 对于任意的散列码h，找到满足H(x)=h的x在计算上是不可行的，具有此性质的散列函数被称为**单向**的或是**抗原象**的
- 对任意给定的分组x，找到y!=x使得H(y)=H(x)也是不可行的，称为**第二抗原象**或**弱碰撞性**
- 找到任意满足H(x)=H(y)的偶对（x,y）是不可行的，称为**抗碰撞**的或是**强抗碰撞**的



### 2.3公钥加密

#### 公钥加密的结构

>公钥密码是**非对称的**

- **公钥和私钥**：选出一对密钥，一个用于加密一个用于解码，私钥需保持其秘密性

  公钥对于其他使用者来说是公共的，而私钥只有其使用者知道

公钥加密提供了**机密性**

私钥加密提供了**机密性**和**完整性**

步骤：

1. 每个用户产生一对密钥，用来加密和解密消息
2. 每个用户将其中一个密钥放在公共寄存器中，改密钥称为公钥，另一个密钥则是私有的
3. 若Bob发消息给Alice，则用Alice的公钥加密
4. Alice收到后用私钥解密

#### 公钥密码体制的应用

#### 对公钥密码的要求

- 产生一对密钥是容易的
- 产生密文在计算上是容易实现的
- 恢复明文是容易实现的
- 已知公钥，想确定私钥在计算上是不可行的
- 已知公钥和密文，想恢复明文在计算上是不可行的
- 加密解密函数的顺序可以交换



### 2.4数字签名和密钥管理

#### 数字签名

>  只有数字签名才能提供不可否认性，消息认证不可以
>
> 不可否认性：可抵赖的,如A不承认B曾经给他发消息

数字签名：数据的加密转换的结果能够提供一种机制来保证原始认证、**数据完整性**以及签名的**不可抵赖性**，但是数字签名不提供**机密性**

A利用一个安全的散列函数产生散列值，然后将散列值用私钥加密，从而创建了数字签名

B收到后，首先计算散列值，再利用A的公钥进行解密，最后将计算出的散列值和解密出的散列值作比较，如果一样则能确定改消息是A签名过的

#### 公钥证书

任何需要该用户的人都可以获取这个证书，并通过附带的可信签名来验证其有效性

#### 数字信封（混合加密）

> 可以用来保护信息而不必事先让双方拥有一样的密钥

A(发送方)：

1. 准备要发送的消息
2. 产生一个随机的对称密钥，该密钥只会用到一次
3. 利用一次性密钥对消息进行对称加密
4. 利用B的**公钥**对一次性密钥进行公钥加密
5. 将加密的一次性密钥和加密的消息连在一起发送给B

只有B可以对一次性密钥进行解密

### 2.5随机数和伪随机数



### 2.6补充：数论逆元

> 如果一个数字 A  存在一个对 p 的逆元 x ，就可以写成 A x ≡ 1  m o d  p  的形式(此处 p 与 A 互质，若不互质，则不存在逆元)。

#### 逆元求法

##### 费马小定理+

![](F:\Desktop\邱吉尔\404LearnNotFound\计算机安全\markdown图片\费马小定理.png)

##### 扩展欧几里得

![](F:\Desktop\邱吉尔\404LearnNotFound\计算机安全\markdown图片\扩展欧几里得.png)



## 三、用户认证

> 用户认证两个功能：
>
> - 用户通过呈现一个凭证（例如用户ID）来识别自身以登录系统
> - 系统通过交换认证信息来核实用户身份

### 3.1 数字用户认证方法

数字用户认证：信息系统对用户电子式地提交的身份建立信任的过程



#### 3.1.1 数字用户认证模型

申请人向**注册中心**提交申请，由此成为一个**证书服务提供商的用户**；一旦一个使用者注册成为一个用户，那么用户便能与一些系统进行认证，被认证的团体称为**请求者**，而进行身份验证的团体称为**验证者**，**验证者**将一个关于用户身份声明传递给**依赖方**



#### 3.1.2 认证方法

- **个人所知道的信息**：口令，个人标识码（PIN)
- **个人所持有的物品**：钥匙，令牌
- **个人的生理特征**：指纹，人脸，视网膜
- **个人的行为特征**：通过语音模式和笔记特征进行的识别，根据打字节奏进行的识别



#### 3.1.3 用户认证的风险评估



### 3.2 基于口令的认证

#### 3.2.1口令的脆弱性

攻击策略：

- 离线字典攻击
- 特定账户攻击
- 常用口令攻击
- 单用户口令猜测
- 工作站劫持
- 利用用户疏漏
- 口令重复利用
- 电子监视



#### 3.2.2 散列口令的使用

口令+盐值（盐值是一个随机比特串）作为散列函数的输入，输出为散列码，与用户ID和盐值的明文拷贝一起存放在文件中；验证时输入口令与盐值的明文拷贝一起进行散列码计算，与存放的散列码进行比对

**使用盐值的三个目的**：

- 可以防止复制的口令再口令文件中可见
- 显著增加了离线口令字典攻击的难度
- 它使得攻击者几乎不可能发现一个用户是否在两个或更多的系统中使用了相同的口令

#### 3.2.3 破解“用户选择”口令

##### 传统方法

口令猜测或口令破解

##### 现代方法

1.GPU性能增强，计算速度增加

2.出现了更多被用于生成潜在口令的成熟算法



#### 3.2.4 口令文件访问控制

一种阻止口令攻击的方法是阻止攻击者访问口令文件；将散列后的口令保存在与用户ID分离的单独文件中，这个文件叫做影子口令文件

另一种是强迫用户选择不容易被破解的口令

#### 3.2.5 口令的选择策略

四种方法：

- 用户教育
- 计算机生成口令
- 后验口令检查
- 先验口令检查



### 3.3 基于令牌的认证

#### 3.3.1 存储卡

e.g.银行卡，卡背面有磁条，磁条可以存储一些简单的安全码

缺陷：

- **需要特殊的读卡器**：需要软件和硬件来支持安全性，成本高
- **令牌丢失：**令牌的丢失会使得用户暂时不能进入系统
- **用户不满意**：不方便



#### 3.3.2智能卡 

> 本身就是一个处理器

分类（分类并不互斥）

- **物理特征**：嵌入了微处理器
- **用户接口**：人机接口包括一个键盘区和显示设备，以完成人机交互
- **电子接口**：用于与读取或写入装置通信
- **认证协议**：使用智能令牌的目的就是提供用户认证方法



#### 3.3.3 电子身份证



### 3.4 生物特征认证

#### 3.4.1 用于生物特征认证应用的身体特征

- 面部特征
- 指纹
- 手形
- 视网膜模式
- 虹膜
- 签名
- 语音



#### 3.4.2 生物特征认证系统的运行



### 3.5 远程用户认证

#### 3.5.1 口令协议

#### 3.5.2 令牌协议

#### 3.5.3 静态生物特征认证协议

#### 3.5.4 动态生物特征认证协议 



### 3.6 用户认证中的安全问题

**客户端攻击**：在不访问远程主机或不干扰通信信道的情况下，敌手试图伪装成一个合法用户来完成用户认证的攻击行为

**主机攻击**：直接对存储在主机上的用户文件进行的攻击

**重放**：敌手对以前截获到的用户响应消息进行重放的一种攻击

**拒绝服务**：试图通过大规模的认证请求使认证服务失效



## 四、访问控制

> 授权/拒绝一些信息，设备，使得其满足一些安全策略

### 4.1 访问控制原理

#### 4.1.1 访问控制语境

- **认证**：验证用户或其他系统实体声称的身份是有效的
- **授权**：授予系统实体访问系统资源的权限和许可
- **审计**：对系统记录和活动进行独立评审和检查



#### 4.1.2 访问控制策略

- **自主访问控制**（DAC）：允许一个实体按其自己的意志授予另一个实体访问某些资源的权限
- **强制访问控制**（MAC）：具有访问某种资源的许可的实体不能按其自己的意志授予另一个实体访问那种资源的权限
- **基于角色的访问控制**（RBAC）：基于用户在系统中具有的角色享有哪些访问权的规则来控制访问
- **基于属性的访问控制**（ABAC）：基于用户、被访问资源及当前环境条件来控制访问



### 4.2 主体、客体和访问权

- **主体**是能够访问客体的实体

  一般有三种主体：

  - **所有者**：可以是资源的创建者
  - **组**：除去分配给所有者的特权，命名组的用户也可以被授予访问权
  - **世界**：被授予最少访问权的用户

- **客体**是外界对其访问受到控制的资源

- **访问权**描述了主体可以访问客体的方式：

  - **读**
  - **写**
  - **执行**
  - **删除**
  - **创建**
  - **搜索**



### 4.3 自主访问控制

#### 4.3.1 一个访问控制模型

- **进程**
- **设备**
- **存储单元或区域**
- **主体**



#### 4.3.2 保护域

> 保护域是一组客体及对这些客体的访问权





### 4.4 实例：UNIX文件访问控制



### 4.5基于角色的访问控制（RBAC）

基本模型RBAC_0:

- **用户**：访问该计算机系统的个体
- **角色**：组织内部控制该计算机系统的命名工作职能
- **许可**：对一个或多个客体的特定访问模式的认可
- **会话**：用户与其被分配的角色集的激活子集的映射



**RBAC1**----角色层次

**RBAC2**----约束，e.g.互斥角色



### 4.6 基于属性的访问控制（ABAC）

> 非常灵活

#### 4.6.1 属性

- **主体属性**：是一个主动的实体（如用户、应用、进程或设备），能引起课题简单信息流动或系统状态的改变
- **客体属性**：客体，也被称为资源
- **环境属性**：这类属性到目前为止，在很大程度上被大多数访问控制规则所忽视



#### 4.6.2 ABAC逻辑架构

主体对客体的一次访问将遵循：

1. 主体向客体提出访问请求，该请求被路由到一个访问控制装置
2. 该访问控制装置通过一组预先配置的访问控制策略所定义的规则进行控制
3. 若访问获得授权，则访问控制机制授权主体访问客体；若访问未被授权，则拒绝访问



#### 4.6.3 ABAC策略

**策略**是一组用来管理组织内部的允许行为的规则和关系，其基础是主体所具有的特权。反过来，**特权**代表主体的授权行为；tips:特权=权力=授权=资格





### 4.7 身份、凭证和访问管理

#### 4.7.1 身份管理

> 将属性分配到数字身份上去，并且将数字身份与个体或NPE连接起来



#### 4.7.2 凭证管理

凭证是一个对象或数据结构，其将身份权威地绑定到用户所拥有并控制的权标



#### 4.7.3 访问管理

- 资源管理
- 特权管理
- 策略管理



#### 4.7.4 身份联合



### 4.8 信任框架

#### 4.8.1 传统的身份交换方法

#### 4.8.2 开放的身份信任框架 



## 五、数据库与云安全

### 5.1 数据库安全需求

数据库安全始终没有跟上数据库应用发展的原因：

1. 现代数据库管理系统的复杂程度与用于保护这些系统的安全技术是极为不匹配的
2. SQL很复杂，要保证数据库安全需要在全面理解SQL存在的弱点的基础上，制定适当的安全策略
3. 一个组织或机构通常缺少专职的数据库安全管理人员，这样的后果是安全需求与安全保障能力不匹配
4. 大多数企业环境是由多种数据库平台、企业平台和操作系统构成的一个异构环境



### 5.2 数据库管理系统（DBMS）



### 5.3 关系数据库

#### 5.3.1 关系数据库系统要素

详见数据库笔记

#### 5.3.2 结构化查询语言

SQL



### 5.4 SQL注入攻击

SQL攻击是一类针对数据库的最普遍和最危险的基于网络的安全威胁；通过发送恶意的SQL命令到数据库服务器就可以发起SQLi攻击

#### 5.4.1 一种典型的SQLi攻击

SQLi是一种利用数据库层应用中存在的安全漏洞而发起的攻击

#### 5.4.2 注入技术

SQLi攻击的方法通常是在SQL语句中提前终止文本串，随后附加新的命令

#### 5.4.3 SQL攻击途径和类型

- **用户输入**
- **服务器变量**
- **二阶注入**
- **cookie**
- **物理用户输入**

三种攻击方式：

1. **带内**
2. **推理**
3. **带外**



**带内攻击**使用同样的通信信道来完成SQL代码注入和结果返回，**带内攻击**方式包含以下几种：

- **重言式**：注入永真的表达式
- **行尾注释**：在注入代码到特定字段之后，字段之后的合法代码会被注释标记为无效字段
- **捎带查询**：攻击者在预期查询之外添加额外的查询，使攻击行为与合法请求一同被执行



**推理攻击**没有实际的数据传输，但攻击者通过发送特定的请求和观察网站或数据库服务器的响应行为来重新构造消息：

- **非法/逻辑错误查询**
- **盲SQL注入**


**带外攻击**：检索数据使用不同的通信信道


#### 5.4.4 SQLi应对措施

**防御性编码**：

- **手动防御性编码实践**
- **参数化查询插入**
- **SQL DOM**

目前已经开发许多**检测**方法：

- **基于签名**
- **基于异常**
- **代码分析**



### 5.5 数据库访问控制

DBMS可以支持不同的管理策略，这些策略如下：

- **集中管理**：少量的特权用户可以授予和回收访问权
- **基于所有权的管理**：表的创建者可以授予和回收该表的访问权
- **分散管理**：表的创建者除了可以授予和回收该表的访问权外，还可以对其他用户授予和回收授权的权利



#### 5.5.1 基于SQL的访问定义

GRANT用于授权，REVOKE用于收回授权



#### 5.5.2 级联授权

当A收回访问权时，级联的访问权也被收回



#### 5.5.3 基于角色的访问控制

在自主访问控制环境下，我们可以把数据库用户分成三大类：

- **应用程序属主**：拥有数据库对象并将其作为应用程序一部分的终端用户
- **应用程序属主外的终端客户**：不拥有任何数据库对象但可通过一个应用程序操作数据库对象的终端用户
- **管理员**：对数据库的整体或者部分负有管理职责的用户



SQL Server支持三种类型的角色：服务器角色、数据库角色和用户定义的角色；前两种类型被称为固定角色，是系统预先配置的

**固定服务器角色**定义在服务器级，独立于任何用户数据库而存在

**固定数据库角色**运行于单独的数据库级

SQL Server允许用户创建角色，这些**用户定义的角色**被分配对数据库一部分的访问权



### 5.6 推理

> 获得非授权数据的信息传送路径被称为**推理通道**

有两种方法处理由推理造成的信息泄露威胁：

- **数据库设计时的推理检测**：通过修改数据库结构或改变访问控制机制等手段**消除推理通道**来防止推理
- **查询时的推理检测**：如果发现了推理通道，查询就被拒绝或修改



### 5.7 数据库加密

数据库加密存在以下两方面缺点：

- **密钥管理**：授权用户必须能够访问其被允许访问的数据的解密密钥，而数据库访问用户众多，为授权的用户和应用提供数据库的安全密钥是一项复杂的工作
- **不灵活**：当数据库被加密时，执行记录搜索变得很困难



### 5.8 数据中心安全

#### 5.8.1 数据中心要素

- **交叉连接器**
- **水平电缆**
- **主干电缆**

#### 5.8.2 数据中心安全注意事项

#### 5.8.3 TIA-942



## 六、恶意软件

> 恶意软件，损害受害者数据、应用程序或操作系统的机密性、完整性或可用性

### 6.1 恶意软件的类型

##### 6.1.1 恶意软件的粗略分类

- 基于传播方式分类
  - 对现有可执行程序的感染或由病毒翻译并随后传播至其他系统的内容
  - 说服用户绕过安全机制来安装木马或响应网络钓鱼
- 基于工作方式或有效载荷分类
  - 污染系统或数据文件
  - 窃取服务使系统成为僵尸网络中的一个僵尸代理
  - 窃取系统信息
  - 隐蔽恶意软件的存在防止被系统检测

### 6.2 高级持续性威胁（APT）

APT精心对目标进行选择，具有持续性，通常是隐秘的，APT具有以下特征：

- **高级**：攻击者使用多种入侵技术和恶意软件
- **持续性**：攻击者用很长时间确定针对攻击目标的攻击应用可以最大化攻击成功的概率
- **威胁**：针对选定目标的威胁来自有组织、有能力和有良好经济支持的攻击者



### 6.3 传播-感染内容-病毒

> 软件片段的寄生，将自身依附于一些现有的可执行内容中；病毒感染的方式是几种现代恶意软件使用的传染方式中的一种，其他方式包括了蠕虫和木马等

#### 6.3.1 病毒的性质

计算机病毒是一种通过修改正常程序而进行感染的软件

病毒能实现正常程序所能实现的任何功能，能跟着宿主程序的允许而悄悄运行。一旦运行就能实现任何功能，如删除文件和程序



计算机病毒的三个组成部分：

- **感染机制**：指病毒传播和进行组我复制的方法，也被称为**感染向量**
- **触发条件**：指激活或交付病毒有效载荷的事件或条件，有时被称为**逻辑炸弹**
- **有效载荷**：指病毒除传播之外的活动，可能包括破坏活动，也可能包括无破坏但值得注意的良性活动

典型的病毒会经历下面4个阶段：

- **潜伏阶段**：病毒处于休眠状态
- **传播阶段**：病毒将自身的拷贝插入其他程序或硬盘上某个与系统相关的区域
- **触发阶段**：病毒被激活以执行其预先设定的功能
- **执行阶段**：执行病毒功能



#### 6.3.2 宏病毒和脚本病毒

> 附加到文档并使用文档应用程序的宏编程功能来执行和传播

宏病毒的威胁性主要有以下几个原因：

- 宏病毒有独立的平台
- 宏病毒感染的是文档而不是可执行部分的代码
- 宏病毒的传播很容易，因为它们所利用的文档通常是共享使用的
- 宏病毒感染的是文档而不是系统程序，系统的访问控制在防止其扩散方面作用有限
- 宏病毒的制造或修改更加简单



宏病毒利用脚本或宏语言支持活动内容，并嵌入到文字处理文档或其它类型的文件中

**宏病毒结构**：虽然宏语言可能具有类似的语法，但细节取决于解释宏的应用程序，因此宏语言始终针对特定应用程序的文档



#### 6.3.3 病毒的分类

两个垂直的分类方向：

- 病毒试图感染的对象的类型
- 病毒躲避用户和反病毒软件检测的方法



按照目标可分类为：

- **感染引导扇区病毒**：感染主引导记录或引导记录，当系统从含有这类病毒的磁盘上启动时病毒就开始传播
- **感染可执行文件病毒**：感染可以在操作系统或shell中执行的文件
- **宏病毒**：感染含有由应用程序解释的可执行宏代码或脚本语言的文件
- **多元复合型病毒**：多种途径感染文件

按隐蔽方式进行分类：

- **加密型病毒**：先通过部分病毒代码生成一个随机的密钥，然后用密钥加密其余部分
- **隐蔽型病毒**：设计目的就是躲避反病毒软件的检测，因此不仅隐藏有效载荷，而且隐藏病毒整体，一般通过代码的多态、压缩或者rootkit技术实现隐藏
- **多态病毒**：为了防止被检测到，在自我复制时生成功能相同但位排列方式完全不同的拷贝的病毒；为实现这个目标，多态病毒可能随即插入冗余指令或交换独立指令的顺序；更有效的方式是加密，病毒中生成密钥进行加密/解密的部分称为**变形引擎**，这个**变形引擎**本身也会发生改变
- **变形病毒**：与多态病毒一样，每次感染病毒都发生变异。但变形病毒每次变异都重写病毒体，以此增加病毒检测的难度，不仅改变病毒的组织形式，而是病毒行为也改变了



### 6.4 传播-漏洞利用-蠕虫

> 恶意软件的另一种传播形式涉及软件漏洞利用,而蠕虫会利用这些漏洞

为了复制自身，蠕虫利用一些方法来访问远程系统，这些方法如下：

- **电子邮件或即使通信工具**
- **文件共享**
- **远程执行能力**
- **远程文件访问或传输能力**
- **远程登陆能力**

#### 6.4.1 发现目标

寻找其他系统进行感染，这个过程叫做**扫描**或**指纹采集**

网络地址扫描方式：

- **随机式探索**：每一台被感染的主机使用不同的种子来探测IP地址空间的随机地址
- **黑名单**：攻击者首先为潜在的易感染机器列出一个大名单
- **拓扑式探索**：利用被感染机器中所包含的信息来寻找和扫描更多的主机
- **本地子网**：如果防火墙后的一台主机可以被感染，则该主机会在其所在的本地网络中寻找目标

#### 6.4.2 蠕虫传播模型

缓慢的开始阶段+快速的传播阶段+缓慢的结束阶段

#### 6.4.3 Morris蠕虫

#### 6.4.4蠕虫攻击简史

#### 6.4.5 蠕虫技术现状

有如下特征：

- **多平台**：不局限于windows
- **多种攻击手段**
- **超快速传播**
- **多态**：借鉴了病毒的多态技术
- **变形**
- **传输载体**：因为蠕虫能迅速感染大量系统，因此他是传播其他分布式攻击程序的理想载体
- **0-day攻击**：为了获得最大的震动和扩散范围，蠕虫会利用未被人知的漏洞

#### 6.4.6 移动代码

#### 6.4.7 手机蠕虫

#### 6.4.8 客户端漏洞和路过式下载

另一种攻击软件漏洞的方式是利用应用程序中的缺陷来安装恶意软件，该方法被称为**路过式下载**

#### 6.4.9 点击劫持

点击劫持也称为用户界面伪装攻击，是一种攻击者收集被感染用户鼠标点击信息的攻击



### 6.5 传播-社会工程学-垃圾电子邮件、木马

#### 6.5.1垃圾电子邮件

#### 6.5.2 特洛伊木马

> 一个表面上看起来有用的程序或命令过程，但内部隐藏有恶意代码，被调用时会执行非预期的或有害的功能

特洛伊木马一般属于下面三种模型中的一种：

- 执行源程序功能的同时，另外同时执行独立的恶意代码
- 继续执行源程序的功能，但是会对其进行修改，以执行恶意行为
- 用恶意功能完全替代原程序的功能

#### 6.5.3 手机木马

### 6.6 载荷-系统损坏

#### 6.6.1 数据损坏和勒索软件

加密用户数据，向用户索要赎金才可以恢复数据

#### 6.6.2 物理损害

e.g重写计算机的BIOS代码

#### 6.6.3 逻辑炸弹



### 6.7 载荷-攻击代理-zombie、bot

> 攻击者暗中使用受感染的系统的计算资源和网络资源，被感染的系统被称为僵尸机

#### 6.7.1 bot的用途

- **分布式拒绝服务攻击（DDoS）**
- **发送垃圾邮件**
- **嗅探通信流量**
- **记录键盘**
- **传播新的恶意软件**
- **安装广告插件和浏览器辅助插件**
- **攻击IRC聊天网络**
- **操纵在线投票或游戏**



#### 6.7.2 远程控制功能



### 6.8 载荷-信息窃取-键盘记录器、网络钓鱼、间谍软件

#### 6.8.1 凭证盗窃、键盘记录器和间谍软件

#### 6.8.2 网络钓鱼和身份盗窃

#### 6.8.3 侦察、间谍和数据渗漏



### 6.9 载荷-隐蔽-后门、rootkit

#### 6.9.1 后门

一个程序的秘密入口

#### 6.9.2 rootkit

安装在系统中用来支持以管理员权限对系统进行访问的一组程序

rootkit可基于以下特征进行分类：

- **持续的**
- **基于内存的**
- **用户模式**
- **内核模式**
- **基于虚拟机的**
- **外部模式**

### 6.10 对抗手段

#### 6.10.1 针对恶意软件的对抗措施

- **检测**：一旦被感染，就马上确定恶意软件的存在并对其定位
- **识别**：一旦检测到恶意软件，立即识别出是何种恶意软件感染了系统
- **清除**：一旦识别出，立刻清除恶意代码



恶意软件对抗措施需要满足的要求：

- **通用性**：能对付绝大多数攻击
- **及时性**：能快速响应
- **弹性**：能够抵抗攻击者的反恶意软件技术
- **最小拒绝服务代价**：减少对主机性能和服务质量的影响
- **透明性**：不能修改现有的os、应用程序和硬件
- **全局与局部覆盖范围**：能同时处理企业网外部和内部的攻击源

#### 6.10.2 基于主机的扫描器和基于签名的反病毒软件

####  6.10.3 边界扫描处理



## 七、拒绝服务攻击

### 7.1 拒绝服务攻击

#### 7.1.1 拒绝服务攻击的本质

拒绝服务（Denial-of-Service, DoS）攻击是一种针对某些服务可用性的攻击

DoS攻击对象有下面几类：

- **网络带宽**
- **系统资源**
- **应用资源**

另一种形式的针对系统资源的DoS攻击，通过使用某些特殊数据包来触发系统的网络处理软件的缺陷

#### 7.1.2 经典的拒绝服务攻击

最简单经典的DoS攻击就是**洪泛攻击**，占据所有到目标组织的网络连接的容量（ping）

#### 7.1.3 源地址欺骗

采用伪造的源地址

#### 7.1.4 SYN欺诈

造成服务器TCP连接表溢出，攻击的对象是**目标系统上的网络处理程序**，会一直把数据包发送给伪造的地址

### 7.2泛洪攻击

#### 7.2.1 ICMP洪泛

利用ICMP回送请求数据包的ping洪泛攻击

#### 7.2.2 UDP洪泛

UDP被发送到目标系统提供服务的端口上，服务器会产生响应包返回给源主机；不管有没有响应，都消耗了服务器的链路容量，产生的响应数据包只是加重了服务器及其网络链路的负载

#### 7.2.3 TCP SYN 洪泛

攻击对象是**数据包的总量**，由于数据包不属于任何已知连接而被服务器拒绝，但是这时攻击者已经成功攻击了服务器的网络链路



### 7.3 分布式拒绝服务攻击

入侵制造僵尸机，形成僵尸网络，可以用来制造分布式拒绝服务攻击

### 7.4 基于应用的带宽攻击

> 强制目标进行资源消耗操作，是拒绝服务的一种可能有效的策略

#### 7.4.1 SIP洪泛

利用单个INVITE请求造成的相当大的资源开销，攻击者利用伪造的IP地址向一个SIP代理泛红大量的INVITE请求

- 服务器的资源被INVITE请求消耗
- 服务器的网络容量被消耗

#### 7.4.2 基于HTTP的攻击

- **HTTP洪泛攻击**：利用HTTP请求攻击Web服务器
- **Slowloris**：不停得向服务器发送不完整的HTTP请求，试图独占所有可用的请求处理线程

### 7.5 反射攻击与放大攻击

#### 7.5.1 反射攻击

将想要攻击的系统作为数据包的源地址，将这些数据包发送给中间媒体上的已知网络服务，当中间媒体响应时，就有大量的响应数据包会被发送给源地址所指向的目标系统，利用一个较小的请求就很产生较大响应数据包的服务

另一种是利用TCP，将有虚假地址的SYN发给中间服务器，服务器就会返回SYN-ACK数据包给想要攻击的主机

还有一种是在中间媒介和目标系统之间建立了一条自包含的回路

#### 7.5.2 放大攻击

中间媒介会对没有初始数据包产生多个响应数据包

#### 7.5.3 DNS放大攻击

利用DNS协议将较小的请求数据包转化为较大的响应数据包而达到攻击效果



### 7.6 拒绝服务攻击防范

- **攻击前**：根据需求提供后备资源
- **攻击时**：在攻击一开始就检测出来并快速响应
- **攻击时和攻击后**：试图识别攻击源
- **攻击后**：试图排除或消减攻击带来的影响

## 八、入侵检测

### 8.1 入侵者

入侵者粗略分类：

- **网络罪犯**
- **活动家**
- **国家资助的组织**
- **其他**

技术水平：

- **学徒**
- **训练有素者**
- **高手**

入侵者行为：

- **目标获取和信息收集**
- **初始访问**
- **权限提升**
- **信息收集或系统利用**
- **维持访问权限**
- **覆盖痕迹**

### 8.2 入侵检测（IDS）

> **安全入侵**:未经授权绕过系统安全机制的行为
>
> **入侵检测**:一种硬件或软件功能,该功能用于收集和分析计算机或网络中各个区域的信息,以识别可能的安全入侵

IDS包括三个逻辑组件:

- **传感器**:负责收集数据
- **分析器**:分析器从一个或多个传感器或其他分析器接受输入;负责确定是否发生了入侵
- **用户接口**:IDS的用户接口使用户能够查看系统输出或控制系统的行为



IDS通常根据分析数据的来源和类型进行分类:

- **基于主机的IDS**:检测一台主机的特征和该主机发生的与可疑活动相关的事件
- **基于网络的IDS**:检测特定网段或设备的流量并分析网络\传输和应用协议
- **分布式或混合式IDS**:将来自大量传感器的信息组合在一个中央分析器中,以便更好地识别和响应入侵活动

#### 8.2.1 基本原理

假设入侵者的行为和合法用户的行为之间存在可以量化的差别

### 8.3 分析方法

IDS通常使用以下几种方法之一来分析传感器得到的数据进而检测入侵:

1. **异常检测**:包括采集有关合法用户在某段时间内的行为数据,然后分析当前观察到的行为,以较高的置信度确定该行为是合法用户的行为还是入侵者的行为
2. **特征或启发式检测**:用一组已知恶意数据模式或攻击规则组成的集合来与当前的行为进行比较,最终确定这是否是一个入侵者



### 8.4 基于主机的入侵检测（HIDS）

#### 8.4.1 数据源和传感器

常见的数据源包括:

- **系统调用踪迹**
- **审计(日志文件)记录**
- **文件完整性校验和**
- **注册表访问**


#### 8.4.4 分布式HIDS

主要由三个组件组成：

- **主机代理模块**
- **局域网监测代理模块**
- **中央管理器模块**

### 8.5 基于网络的入侵检测

#### 8.5.1 网络传感器的类型

传感器可以部署为两种模式之一:内嵌式和被动式

- **内嵌传感器**:被插入网络段,以使正在监控的流量必须通过传感器
- **被动传感器**:被动传感器监控网络流量的备份,实际的流量并没有通过这个设备；从通信流角度看更有效率，因为不会添加一个额外的处理步骤

#### 8.5.2 NIDS传感器部署

> 通常部署在外部防火墙内

该位置有多个优点:

- 观测源自外部的攻击,建立入侵网络的外围防护
- 强调网络防火墙策略或性能问题
- 观测可能针对web服务器或FTP服务器的攻击
- 即使进入的攻击不能被识别,IDS有时也可以识别出由于服务器遭受攻击而输出的流量

#### 8.5.3 入侵检测技术

- **特征检测**
- **异常检测技术**
- **状态协议分析(SPA)**




### 8.8 蜜罐

> 蜜罐是掩人耳目的系统，是为了引诱潜在的攻击者远离关键系统而设计的

蜜罐的功能是：

- 转移攻击者对重要系统的访问
- 收集有关攻击者活动的信息
- 引诱攻击者在系统中逗留足够长的时间，以便于管理员对此攻击做出响应

蜜罐通常分为低交互蜜罐和高交互蜜罐：

**低交互蜜罐：**能模拟特定IT服务或软件，足以提供一种真实的初级交互，但无法提供模拟服务或系统的全部功能

**高交互蜜罐**：带有完整的操作系统、服务以及应用程序的真实系统

## 九、防火墙与入侵防御系统

### 9.2 防火墙的特征和访问策略

**防火墙设计目标:**

1. 所有从内部到外部的流量都必须通过防火墙,反之亦然
2. 只有经过授权的网络流量,防火墙才允许其通过
3. 防火墙本身不能被渗透



**防火墙应具备的功能:**

1. 定义一个遏制点,把未授权的用户阻止在受保护的网络之外
2. 防火墙提供了监视安全相关事件的场所
3. 防火墙可以为多种与安全不相关的Internet功能的实现提供一个便利的平台
4. 防火墙能够实现虚拟专用网(VPN)功能



**防火墙的局限性:**

1. 防火墙不能阻止那些绕过防火墙的攻击
2. 防火墙不能完全防止内部威胁
3. 一个安全设置不当的无线局域网有可能允许来自公司外部的访问
4. 笔记本等设备可能在企业网以外的地方使用时被感染了,之后被连接到内部网络使用



### 9.3 防火墙的类型

#### 9.3.1 包过滤防火墙

> 会检查每个接受和发送的IP包，一般防火墙会配置成双向过滤,过滤规则基于网络包中所包含的信息:

- **源ip地址**
- **目的ip地址**
- **源和目的端传输层地址**
- **IP协议域**
  - **接口**

简单，但是有以下弱点：

- 不检查更高层的数据，因此不能阻止利用了特定应用的漏洞或功能所进行的攻击
- 防火墙可利用的信息有限，使得包过滤防火墙的日志记录功能也有限
- 大多数包过滤防火墙不支持高级的用户认证机制
- 对TCP/IP的攻击没有很好的应对措施
- 配置防火墙时容易不经意间违反机构内部的消息安全策略

#### 9.3.2  状态检测防火墙

> 不仅检查与包过滤防火墙相同的数据包信息，也记录有关TCP连接的信息

#### 9.3.3  应用级防火墙

> 起到应用级流量中继器的作用

#### 9.3.4  电路级防火墙

> 

### 9.4 防火墙的布置

#### 9.4.1 堡垒主机

#### 9.4.2 基于主机的防火墙

#### 9.4.3 网络设备防火墙

#### 9.4.4 虚拟防火墙

#### 9.4.5 个人防火墙



### 9.5 防火墙的部署和配置

#### 9.5.1 DMZ网络

内部防火墙的三个服务目的：

- 与外部防火墙相比，内部防火墙有更严格的过滤功能
- 对于DMZ网络，内部防火墙提供双重的保护功能
- 多重内部防火墙可以分别保护内部网的每个部分不受其他部分的攻击



### 9.6 入侵防御系统

#### 9.6.1 基于主机的IPS

> **能够使用特征/启发式检测或异常检测来识别攻击**

#### 9.6.2 基于网络的IPS

> 一个基于网络的IPS实质上是一个具有修改或丢弃数据包和断开TCP连接权限的内嵌NIDS

#### 9.6.3 分布式或混合式IPS

> 收集大量基于主机和基于网络的传感器数据，将其传送到中央处理系统



## 十、缓冲区溢出

### 10.1 栈溢出

#### 10.1.1 缓冲区溢出的基本知识

> 缓冲区溢出是作为编译错误的结果发生的

#### 10.1.2 栈缓冲区溢出

当目标缓冲区被设置在栈区时，所发生的溢出就**是栈缓冲区溢出**

**函数调用机制**：这些数据一般都保存在栈的一个被称为**栈帧**的结构中

#### 10.1.3 shellcode

### 10.2 针对缓冲区溢出的防御

- **编译时防御：**加固程序来抵抗在新程序中的攻击
- **运行时防御：**：目标是在现有的程序中检测和终止攻击

#### 10.2.1 编译时防御

- 使用现代高级语言
- 安全的编码技术
- 语言扩充和安全库的使用
- 栈保护机制

#### 10.2.2 运行时防御

- **可执行地址空间保护**
- **地址空间随机化**



### 10.3 其它形式的溢出攻击

#### 10.3.1 替换栈帧

> 改写设置在一个栈帧的局部变量区域的缓冲区，并改写保存的帧指针和返回地址

#### 10.3.2 返回到系统调用

#### 10.3.3 堆溢出

> 堆一般设置在程序代码和全局数据之上，使用动态数据结构的程序是从堆中请求内存的，如记录的链表

#### 10.3.4 全局数据区溢出

> 全局数据从程序文件中被装在，并设置在程序代码区之上

## 十一、软件安全

### 11.1 软件安全问题

**软件安全和防御性程序设计**

很多计算机安全漏洞都是由于不严谨的编程习惯造成的

**减少软件漏洞数量的方法：**

- 通过使用改进的方法来指定和构建软件，以预防漏洞的出现
- 通过使用更好且更加有效的测试技术在漏洞被利用之间发现他们
- 通过建立弹性更强的架构来减少漏洞带来的影响



CWE/SANS评出的前25个最严重的软件错误：

- **软件类型错误**：组件之间的不安全的组件间交互
- **软件错误类型**：高风险的资源管理
- **软件错误类型**：脆弱的防御



软件安全与**软件质量**和**可靠性**紧密相关



**防御性程序设计或安全程序设计：**是一个软件设计与实现流程，目的是使生成的软件即使在面临攻击时仍然能够继续工作

### 11.2 处理程序输入

> 对程序输入不正确的处理是软件安全最常见的失误之一

#### 11.2.1 输入的长度和缓冲区溢出

解决办法：使用动态缓冲区确保有足够的有效空间，或者把输入数据处理成缓冲区长度的数据块

#### 11.2.2 程序输入的解释

**注入攻击**：

- **注入攻击：**
  - **命令注入**：使用的输入数据可以建立一个命令，随后通过拥有Web服务器特权的系统执行这个命令
    - 解决办法：需要明确识别有关输入形式的任何假设，在使用数据之前验证这些数据与其假设是否一致
  - **SQL注入**：用户提供的输入数据可以建立一个SQL请求，从数据库取回一些信息
  - **代码注入**：提供的输入包含被攻击的系统能够运行的代码
    - 解决办法：阻止将表单字段的值分配给全局变量/在include（和require）命令中仅使用常量值


**跨站点脚本攻击**：一个用户给程序提供输入，而由此产生的结果输出给另外一个用户
攻击者在提交给站点的数据中包含恶意的脚本代码，如果这个内容未经充分检查就显示给其他用户，而这些用户假设这个脚本是可以信任的，他们将执行这个脚本，访问与那个站点相关的任何数据

**解决办法：**任何用户提供的输入都要接受检查，任何危险代码都要被删除或者阻止执行

#### 11.2.3 验证输入语法

假设程序员不能控制输入数据的内容，那么在使用这些数据之前就必须确保这些数据与对数据的假设一致，通常用**正则表达式**完成

由于多重编码的可能性，因此输入的数据必须首先转换成单一的、标准的、最小的表示形式，这个过程称为**规范化**，通常用一个通用的值代替那些等价的编码

#### 11.2.4 输入的fuzzing技术

这是一个软件测试结束，它使用随机产生的数据作为程序的输入进行测试



### 11.3 编写安全程序代码

#### 11.3.1 算法的正确实现

**关键问题：**

一个算法没有正确实现问题的所有情形和变化，就可能允许一些似乎合法的程序输入触发一些程序行为，而这些程序行为并不是程序应该完成的，因而给攻击者提供了一些其他的能力

e.g. TCP会话欺骗或者hijack攻击：发送一个伪造的数据包到一个TCP服务器，欺骗服务器接受伪造源地址的数据包，其中源地址属于可信的主机但数据包却源于攻击者的系统。如果攻击成功，就会说服服务器运行一些命令或者提供数据访问，前提是这些服务是允许提供给可信主机的



#### 11.3.2 保证机器语言与算法一致

#### 11.3.3 数据值的正确解释

防御方法：使用具有较强类型的编程语言/必须仔细处理在各种数据类型之间强制转换的数据

#### 11.3.4 内存的正确使用

内存的动态分配和管理，其一般用于堆的处理；没有释放分配的内存会导致堆区的内存逐步减少，直至完全用尽。就给了攻击者一个明显的机制用来进行拒绝服务攻击

#### 11.3.5 阻止共享内存竞争条件的产生

当多个进程或线程通过竞争来获取对一些资源的未加控制的访问时，会导致**竞争条件**的发生，可能导致**死锁**



### 11.4 与操作系统和其他程序进行交互

#### 11.4.1 环境变量

**环境变量**是每个进程从其父进程中继承的能够影响进程运作方式的一系列字符串值

程序的安全顾虑在于这些环境变量提供的可以进入一个程序的另一个路径是未确定的数据，因而需要验证

#### 11.4.2 使用合适的最小特权

如果特权比本来为攻击者分配的权限高，就会导致**特权扩大**

**最小特权**原则：每个程序都应该使用完成其功能所需的最小特权

**最小化特权**的更进一步技术，是在一个特定分隔出的与文件系统隔离的区域内运行存在潜在漏洞的程序

#### 11.4.3 系统调用和标准库函数

缺陷：

- 在文件以写的方式打开时，系统需要将新的数据当作原来的数据写到相同的磁盘块
- 当文件被某个样本覆盖的时候，数据立即写入硬盘
- 当刷新I/O缓冲区以及关闭文件的时候，数据被写入硬盘



#### 11.4.4 阻止共享系统资源的竞争条件的产生

最常用的方法是设定一个**锁**



#### 11.4.5 安全临时文件的使用

很多程序在处理数据的时候，需要存储数据的临时副本



#### 11.4.6 与其他程序进行交互



### 11.5 处理程序输出

从程序安全的角度讲，输出和预想的形式相符合是很重要的。如果直接传递给用户，输出数据可能被一些程序和设备解释并显示



## 十二、操作系统安全

## 十三、云和IOT安全

### 13.1 云计算

#### 13.1.1 云计算要素

- 广泛的网络接入
- 快速伸缩性
- 可测量的服务
- 按需自服务
- 资源池



#### 13.1.2 云服务模型

- **软件即服务**
- **平台即服务**
- **基础设施即服务**



#### 13.1.3 云部署模型

- **公有云**
- **私有云**
- **社区云**
- **混合云**



#### 13.1.4 云计算参考架构

- **云服务客户**
- **云服务提供者**
- **云审计者**
- **云经纪人**
- **云运营者**



### 13.3 云安全方法

#### 13.3.1 风险和策略

云安全威胁：

- **滥用和恶意使用云计算**
- **不安全接口与应用程序编程接口**
- **恶意的内部人员**
- **技术共享问题**
- **数据丢失与泄露**
- **账户或服务劫持**
- **未知的风险状况**

#### 13.3.2 云上的数据保护

- 隔离数据


- 控制对数据的访问
- 客户端使用加密来保护传输中的数据