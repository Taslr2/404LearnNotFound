# 数据库

[TOC]

## 一、引言

### 1.1 数据库发展概述

### 1.2 数据库基本概念

数据是数据库**存储的基本对象**

数据的定义:**描述事物的符号记录**，`数据和语义是不可分的`

- 数据库的定义

  数据库是**长期储存**在计算机内、**有组织的**、**可共享的** **大量数据**的集合。


- 为什么要建立数据库

  收集并抽取出一个应用所需要的大量数据，将其保存以供进一步**加工处理，抽取有用信息，转换为有价值的知识。**

- 数据库的基本特征

  - 数据按一定的**数据模型**组织、描述和储存
  - 较小的**冗余度**
  - 较高的**数据独立性**
  - 易**扩展性**

### 1.3 数据模型与数据建模

#### 1.3.1 数据模型三要素

- 数据结构:描述数据库的组成**对象**以及**对象之间的联系**
- 数据操作:对数据库中各种对象(型)的实例(值)允许执行的**操作的集合，操作符号，操作规则(如优先级)**，数据操作是对模型**动态特性的描述**
- 数据的完整性约束
  - 一组**完整性规则**
  - 完整性规则:给定的数据模型中**数据及其联系所具有的制约和依存规则**
  - 限定符合数据模型的数据库状态以及状态的变化，以**保证数据的正确、有效和相容**

数据模型提供**完整性约束的定义和检查机制**

#### 1.3.2 网状模型

- 网状模型采用**网络结构**来表示各类实体以及实体间的联系
- **网状数据库**系统采用**网状模型**作为数据的组织方式

#### 1.3.3 关系模型

- 关系模型由一组关系组成
- 每个关系的数据结构是一张规范化的二维表



### 1.4 数据库系统的三级模式结构

>型(type):**对某一类数据的结构和属性的说明**
>
>学生(学号，姓名，性别，出生日期，主修专业)
>
>值(value):**型的一个具体赋值**
>
>(20180003，王敏，女，2001-8-1，计算机科学与技术)

#### 1.3.1 模式

- 数据库中**全体数据的逻辑结构和特征的描述**
- 是对数据型的描述，不涉及具体值
- 反映的是数据的结构及其联系
- 模式是相对稳定的

#### 1.3.2 实例

- **模式的一个具体值**
- 反映数据库某一时刻的状态
- 同一个模式可以有很多实例
- 实例随数据库中数据的更新而变动

## 二、关系模型介绍

> 关系：无序集合

### 2.1 关系数据库的结构

在关系模型中：

​	1.关系->表

​	2.元组->表中的行

​	3.属性->表中的列

​	4.关系实例->一个关系的特定实例（即一组特定的行）

​	5.域->某一属性所有可能取到的值的集合

​	6.空值->表示值未知或不存在（应尽量避免）

​		

### 2.2 数据库模式

>数据库模式!=数据库实例

**关系** 的概念对应于程序设计语言中变量的概念， ***关系模式*** 对应于程序设计语言中类型定义的概念



### 2.3 码

如果K足够确定R中的一个元组，则称K是一个超键；当超键K最小时，则称其为候选键键；选出其中一个候选键，即是主键

超键>候选键>主键

外码约束：从r1关系的A属性到r2关系的***主键B*** 的外码约束表明：在任何数据库实例中，r1中对A的任意取值也必须是r2中某个元组对B的取值。则A属性集被称为从r1引用r2的外码，r1称为外码约束的***引用关系***，r2则称为***被引用关系***

引用完整性约束：引用关系中的任意元组在指定属性上出现的取值也必然出现在被引用关系中至少一个元组的指定属性上（***不一定是主码，外码约束是一个特例*** ）



### 2.4 模式图

>一个带有主码和外码约束的数据库模式可以用***模式图*** 表示



### 2.5 关系查询语言

***查询语言*** ：用户用来从数据库中请求获取信息的语言

***命令式查询语言*** ：用户指导系统在数据库上执行**特定的运算序列**以计算出所需结果

***函数式查询语言*** ：可以在数据库中的数据上运行或在其他函数给出的结果上运行；函数没有附带作用，且不更新程序状态

***声明式查询语言*** ：用户只需描述所需信息，而不用给出获取该信息的具体步骤序列或函数调用，所需信息通常使用某种形式的数字逻辑来描述 



### 2.6 关系演算

以**数理逻辑中的谓词演算**为基础的数据库语言

按谓词变元不同，分为:

1. **元组关系演算**
   **以元组变量作为谓词变元的基本对象**
   **元组关系演算语言ALPHA**
2. 域关系演算
   以元组变量的分量(域变量)作为谓词变元的基本对象域关系演算语言QBE

#### 2.6.1 元组关系演算语句ALPHA

主要语句

- 6个语句:**GET(检索操作)**、PUT、HOLD、UPDATE、DELETE、DROP
- 基本格式:操作语句 工作空间名(表达式):操作条件

#### 2.6.2 检索操作（使用元组变量）

元组变量:变化范围是在某一关系内(范围变量range variable)

元组变量的用途

1. 简化关系名:设一个较短名字的元组变量来代替较长的关系名
2. 操作条件中使用**量词时必须用元组变量**

元组变量的定义/说明

- RANGE 关系名 **变量名 **    /用RANGE来说明元组变量/ 
- 一个突系可以设多个元组变量

### 2.7 关系代数

运算的三大要素:运算对象、运算符、运算结果

**关系代数的运算对象是关系，运算结果亦为关系**

![](.\图片\关系运算符.png)

#### 2.7.1选择运算

![](.\图片\选择运算.png)

#### 2.7.2 投影运算

![](.\图片\投影运算.png)

#### 2.7.3 链接运算

![](.\图片\链接运算.png)

#### 2.7.4 除法运算

![](.\图片\除法运算.png)



象集概念及解释：

![](.\图片\象集概念.png)

![](.\图片\象集解释.png) 



除法定义：

![](.\图片\除法定义.png)





## 三、SQL介绍

### 3.1 SQL查询语言概览

 

### 3.2 SQL数据定义

####  		3.2.1 基本数据类型

char(n):：长度固定为n的字符串

varchar(n)：最大长度为n的字符串

int：整数

smallint：小整数

numeric(p,d)：指定精度的定点数，共有p位数字，其中有d位小数

real，double precision：浮点数、双精度浮点数

float(n)：精度至少为n位数字的浮点数



#### 		3.2.2 基本模式定义

通过**create table** 命令来定义SQL关系，下面的命令在数据库中创建了一个department关系：

```sql
create table depatment
(dept_name   varchar(20),
 building    varchar(15),
 budget    	 numeric(12,2),
 primary key(dept_name));
```

create table通用格式：

```sql
create table depatment
(A1  D1,
 A2  D2,
 ... ...,
 An  Dn,
 <完整性约束1>，
 ......，
 <完整性约束n>，);
```

删除数据库：

>drop table r > delete from r

前者直接删除r，后者只删除r中的元组

为已有关系增加属性：**alter table r add A D;**

从关系中去掉属性：**alter table r drop A;**



### 3.3 SQL查询的基本结构

>由 **select,from,where** 三个字句构成







