# 数据库

### 二、关系模型

> 关系：无序集合

#### 2.1 关系数据库的结构

在关系模型中：

​	1.关系->表

​	2.元组->表中的行

​	3.属性->表中的列

​	4.关系实例->一个关系的特定实例（即一组特定的行）

​	5.域->某一属性所有可能取到的值的集合

​	6.空值->表示值未知或不存在（应尽量避免）

​		

#### 2.2 数据库模式

>数据库模式!=数据库实例

**关系*** 的概念对应于程序设计语言中变量的概念， ***关系模式*** 对应于程序设计语言中类型定义的概念



#### 2.3 码

如果K足够确定R中的一个元组，则称K是一个超键；当超键K最小时，则称其为候选键键；选出其中一个候选键，即是主键

超键>候选键>主键

外码约束：从r1关系的A属性到r2关系的***主键B*** 的外码约束表明：在任何数据库实例中，r1中对A的任意取值也必须是r2中某个元组对B的取值。则A属性集被称为从				  r1引用r2的外码，r1称为外码约束的***引用关系***，r2则称为***被引用关系***

引用完整性约束：引用关系中的任意元组在指定属性上出现的取值也必然出现在被引用关系中至少一个元组的指定属性上（***不一定是主码，外码约束是一个特例*** ）



#### 2.4 模式图

>一个带有主码和外码约束的数据库模式可以用***模式图*** 表示



#### 2.5 关系查询语言

​		***查询语言*** ：用户用来从数据库中请求获取信息的语言

​		***命令式查询语言*** ：用户指导系统在数据库上执行**特定的运算序列**以计算出所需结果

​		***函数式查询语言*** ：可以在数据库中的数据上运行或在其他函数给出的结果上运行；函数没有附带作用，且不更新程序状态

​		***声明式查询语言*** ：用户只需描述所需信息，而不用给出获取该信息的具体步骤序列或函数调用，所需信息通常使用某种形式的数字逻辑来描述 



### 三、SQL介绍

#### 3.1 SQL查询语言概览



#### 3.2 SQL数据定义

#####  		3.2.1 基本数据类型

​						char(n):：长度固定为n的字符串

​						varchar(n)：最大长度为n的字符串

​						int：整数

​						smallint：小整数

​						numeric(p,d)：指定精度的定点数，共有p位数字，其中有d位小数

​						real，double precision：浮点数、双精度浮点数

​						float(n)：精度至少为n位数字的浮点数

##### 		3.2.2 基本模式定义

​						通过**create table** 命令来定义SQL关系，下面的命令在数据库中创建了一个department关系：

```sql
create table depatment
(dept_name   varchar(20),
 building    varchar(15),
 budget    	 numeric(12,2),
 primary key(dept_name));
```

​							create table通用格式：

```sql
create table depatment
(A1  D1,
 A2  D2,
 ... ...,
 An  Dn,
 <完整性约束1>，
 ......，
 <完整性约束n>，);
```

​						删除数据库：

>drop table r > delete from r

​						前者直接删除r，后者只删除r中的元组

​						为已有关系增加属性：**alter table r add A D;**

​						从关系中去掉属性：**alter table r drop A;**

#### 3.3 SQL查询的基本结构

>由 **select,from,where** 三个字句构成







